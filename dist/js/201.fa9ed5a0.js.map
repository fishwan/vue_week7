{"version":3,"file":"js/201.fa9ed5a0.js","mappings":"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","sources":["webpack://vue_week7/./src/views/CartView.vue","webpack://vue_week7/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\r\n  <section>\r\n    <div class=\"row justify-content-between\">\r\n      <div class=\"col-lg-7\">\r\n        <div>\r\n          <div class=\"float-end\">\r\n            <button class=\"btn btn-dark\" type=\"button\"\r\n            @click=\"deleteAllCarts\" :disabled=\"cartData.carts.length === 0\">清空購物車</button>\r\n          </div>\r\n          <div class=\"page-title\">購物車</div>\r\n        </div>\r\n        <!-- 購物車 -->\r\n        <div class=\"cart\">\r\n          <div class=\"cart-item-title text-center d-flex\">\r\n            <div class=\"cart-item-img\">購買商品</div>\r\n            <div class=\"cart-item-body row\">\r\n              <div class=\"col-4 cart-item-name\"></div>\r\n              <div class=\"col-2 cart-item-sale\">單價</div>\r\n              <div class=\"col-2 cart-item-qua\">數量</div>\r\n              <div class=\"col-2 cart-item-sale\">小計</div>\r\n              <div class=\"col-2 cart-item-delete\"></div>\r\n            </div>\r\n          </div>\r\n          <div v-if=\"cartData.total === 0\" class=\"cart-item cart-item--none\">\r\n            <div class=\"fw-bold text-center\">購物車目前尚無商品</div>\r\n          </div>\r\n          <div v-else>\r\n            <div v-for=\"cartItem in cartData.carts\" class=\"cart-item d-flex align-items-center\" :key=\"cartItem.id\">\r\n              <div class=\"cart-item-img\">\r\n                <span class=\"img\">\r\n                  <img class=\"img-fluid\" :src=\"cartItem.product.imageUrl\" alt=\"\">\r\n                </span>\r\n              </div>\r\n              <div class=\"cart-item-body row align-items-center\">\r\n                <div class=\"col-12 col-lg-4 cart-item-name\">\r\n                  {{ cartItem.product.title }}\r\n                </div>\r\n                <div class=\"col-12 col-lg-2 cart-item-sale\">$ {{ cartItem.product.price }}</div>\r\n                <div class=\"col-12 col-lg-2 cart-item-qua\">\r\n                  <select class=\"form-select\" name=\"cartItemQty\" id=\"cartItemQty\"\r\n                  v-model=\"cartItem.qty\" @change=\"updateCartItem(cartItem)\"\r\n                  :disabled=\"isLoading === cartItem.id\">\r\n                    <option v-for=\"num in 10\" :value=\"num\"\r\n                    :key=\"`${num}-${cartItem.id}`\">\r\n                        {{ num }}\r\n                    </option>\r\n                </select>\r\n                </div>\r\n                <div class=\"col-12 col-lg-2 cart-item-subtotal fw-bold\">$ {{ cartItem.total}}</div>\r\n                <div class=\"col-1 col-lg-2 cart-item-delete\">\r\n                  <!-- 刪除商品按鈕 -->\r\n                  <button class=\"btn btn-link text-dark fs-4\" type=\"submit\"\r\n                  @click=\"deleteCartItem(cartItem.id)\"\r\n                  :disabled=\"isLoading === cartItem.id\"\r\n                  >\r\n                    <div class=\"spinner-border spinner-border-sm\" role=\"status\"\r\n                    v-if=\"isLoading === cartItem.id\">\r\n                      <span class=\"visually-hidden\">Loading...</span>\r\n                    </div>\r\n                    <div v-else>\r\n                      <i class=\"bi bi-x\"></i>\r\n                    </div>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"cart-sale text-end\">\r\n            結帳金額&nbsp;\r\n            <b class=\"is-warning\"><small>$</small>&nbsp;{{ cartData.total }}</b>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-lg-4\">\r\n        <div class=\"page-title\">訂購資訊</div>\r\n        <!-- 訂購表單 -->\r\n        <v-form ref=\"form\" v-slot=\"{ errors }\" @submit=\"sendOrder\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"Email\" class=\"form-label\">Email</label>\r\n            <v-field name=\"email\" type=\"email\" class=\"form-control\" id=\"Email\"\r\n            :class=\"{ 'is-invalid': errors['email'] }\"\r\n            v-model=\"form.user.email\" rules=\"email|required\"></v-field>\r\n            <error-message class=\"invalid-feedback\" name=\"email\"></error-message>\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"Name\" class=\"form-label\">收件者姓名</label>\r\n            <v-field name=\"姓名\" type=\"text\" class=\"form-control\" id=\"Name\"\r\n            :class=\"{ 'is-invalid': errors['姓名'] }\"\r\n            v-model=\"form.user.name\" rules=\"required\"></v-field>\r\n            <error-message class=\"invalid-feedback\" name=\"姓名\"></error-message>\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"Tel\" class=\"form-label\">收件者電話</label>\r\n            <v-field name=\"電話\" type=\"tel\" class=\"form-control\" id=\"Tel\"\r\n            :class=\"{ 'is-invalid': errors['電話'] }\" v-model=\"form.user.tel\"\r\n            rules=\"required|min:8\"></v-field>\r\n            <error-message class=\"invalid-feedback\" name=\"電話\"></error-message>\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"Address\" class=\"form-label\">收件者地址</label>\r\n            <v-field name=\"地址\" type=\"text\" class=\"form-control\" id=\"Address\"\r\n            :class=\"{ 'is-invalid': errors['地址'] }\"\r\n            v-model=\"form.user.address\" rules=\"required\"></v-field>\r\n            <error-message class=\"invalid-feedback\" name=\"地址\"></error-message>\r\n          </div>\r\n          <div class=\"mb-3\">\r\n            <label for=\"Content\" class=\"form-label\">備註</label>\r\n            <textarea class=\"form-control\" id=\"Content\" rows=\"3\" v-model=\"form.message\"></textarea>\r\n          </div>\r\n          <button type=\"submit\" class=\"btn btn-dark w-100\"\r\n          :disabled=\"Object.keys(errors).length > 0 || cartData.carts.length === 0\">\r\n            送出訂購\r\n          </button>\r\n        </v-form>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      form: {\r\n        user: {\r\n          name: '',\r\n          email: '',\r\n          tel: '',\r\n          address: ''\r\n        },\r\n        message: ''\r\n      },\r\n      cartData: {\r\n        carts: []\r\n      },\r\n      isLoading: ''\r\n    }\r\n  },\r\n  methods: {\r\n    getCart () {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.get(url)\r\n        .then((res) => {\r\n          this.cartData = res.data.data\r\n        })\r\n    },\r\n    deleteAllCarts () {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/carts`\r\n      this.$http.delete(url)\r\n        .then(res => {\r\n          alert(res.data.message)\r\n          this.getCart()\r\n        })\r\n    },\r\n    deleteCartItem (id) {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${id}`\r\n      this.isLoading = id\r\n      this.$http.delete(url)\r\n        .then(res => {\r\n          alert(res.data.message)\r\n          this.getCart()\r\n          this.isLoading = '' // 清空\r\n        })\r\n    },\r\n    updateCartItem (item) {\r\n      const data = {\r\n        product_id: item.id,\r\n        qty: item.qty\r\n      }\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart/${item.id}`\r\n      this.isLoading = item.id\r\n      this.$http.put(url, { data })\r\n        .then(res => {\r\n          this.getCart()\r\n          this.isLoading = '' // 清空\r\n        })\r\n    },\r\n    sendOrder () {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/order`\r\n      const order = this.form\r\n      this.$http.post(url, { data: order })\r\n        .then(res => {\r\n          alert(res.data.message)\r\n          this.$refs.form.resetForm()\r\n          this.getCart()\r\n        }).catch((err) => {\r\n          alert(err.data.message)\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getCart()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CartView.vue?vue&type=template&id=637f4862\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\YUHSIN\\\\Desktop\\\\vue-week7\\\\vue_week7\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_9","role","_hoisted_25","_hoisted_28","for","_createElementBlock","type","onClick","$options","disabled","$data","carts","length","_hoisted_4","_hoisted_5","_hoisted_7","total","_hoisted_10","_hoisted_11","_Fragment","_renderList","cartItem","key","id","src","product","imageUrl","alt","_toDisplayString","title","price","name","qty","$event","onChange","num","value","_hoisted_20","_hoisted_26","_hoisted_27","_hoisted_29","_hoisted_33","_hoisted_35","_createVNode","_component_v_form","ref","onSubmit","errors","_hoisted_37","_component_v_field","user","email","rules","_component_error_message","_hoisted_39","_hoisted_41","tel","_hoisted_43","address","_hoisted_45","rows","message","Object","keys","_hoisted_46","data","form","cartData","isLoading","methods","getCart","url","this","$http","get","then","res","deleteAllCarts","delete","alert","deleteCartItem","updateCartItem","item","product_id","put","sendOrder","order","post","$refs","resetForm","catch","err","mounted","__exports__","render"],"sourceRoot":""}